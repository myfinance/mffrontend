<p-divider/>
<p-sidebar [(visible)]="sidebarVisible" styleClass="p-sidebar-lg">

  <label>Betrachtungszeitraum:</label>
  <p-calendar [(ngModel)]="rangeDates" selectionMode="range" (onSelect)="handleRangeDateChanged(rangeDates)" dateFormat="dd.mm.yy" [showIcon]="true"></p-calendar>
  <label>Instrument:</label>
  <p-dropdown 
    [options]="instruments" 
    [(ngModel)]="instrumentFilter" 
    optionLabel="description" 
    placeholder="Filter an Instrument" 
    (onChange)="onInstrumentChange($event)"/>
    <p-divider/>
    <p-button 
    label="clearFilter" 
    (onClick)="clearFilter()" />
</p-sidebar>
<p-button (click)="sidebarVisible = true" icon="pi pi-calendar" [outlined]="true"></p-button>





<div class="view-container">

  <br>
  <div class="scrollable-container">
    <p-table [value]="filteredTransactionViewObjects" 
    dataKey="id" 
    expandableRows
    selectionMode="single" 
    [(selection)]="selectedTransaction" >
<ng-template pTemplate="header">
  <tr>
    <th style="width: 3em"></th>
    <th pSortableColumn="transactiondate">Date<p-sortIcon field="transactiondate"/></th>
    <th pSortableColumn="value">Value<p-sortIcon field="value"/></th>
  </tr>
</ng-template>
<ng-template pTemplate="body" let-transaction let-expanded="expanded">
  <tr>
    <td>
      <p-button type="button" [pRowToggler]="transaction" [text]="true" [rounded]="true" [plain]="true" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'" />
  </td>
    <td>{{ transaction.transactiondate }}</td>
    <td>{{ transaction.value }}</td>
  </tr>
</ng-template>
<ng-template pTemplate="rowexpansion" let-transaction>
  <tr>
    <td colspan="3">
      <div class="p-grid p-fluid">
        <div class="p-col-12 p-md-3"><p-button label="Select" (click)="selectTransaction(transaction)"/></div>
        <div class="p-col-12 p-md-3"><strong>Type:</strong> {{ transaction.transactionType }}</div>
        <div class="p-col-12 p-md-3"><strong>Type:</strong> {{ transaction.description }}</div>
        <div class="p-col-12 p-md-3"><strong>Instrument 1:</strong> {{ transaction.instrument1?.description }}</div>
        <div class="p-col-12 p-md-3"><strong>Instrument 2:</strong> {{ transaction.instrument2?.description }}</div>
        <div class="p-col-12 p-md-3"><strong>Instrument 3:</strong> {{ transaction.instrument3?.description }}</div>
      </div>
    </td>
  </tr>
</ng-template>
</p-table>
    </div>
<div>
